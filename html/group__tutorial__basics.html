<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>frozen: Tutorial: overview, basic i/o</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">frozen&#160;<span id="projectnumber">1.0</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Tutorial: overview, basic i/o</div>  </div>
<div class="ingroups"><a class="el" href="group__tutorial.html">Tutorials</a></div></div>
<div class="contents">
<table class="memberdecls">
</table>


<h3><a class="anchor" id="tutorial_basics_overview"></a>Overview</h3><div class="textblock"><p>To construct nessesary tool frozen have many different building blocks, called backends. Backends can connect to each other and form nearly any configuration, like a graph. To describe which backends would be used and where connection must exist user fill configuration file. Because of "one-dimensional" property of files this is not so trivial as it could be done in GUI. So, configuration written in form of "chains" - list of blocks with connections first to second, second to third and so on. Configuration file can contain any number of chain with any length. To separate different chains special keyword NULL used.</p>
<div class="fragment"><pre class="fragment">{ <span class="keyword">class </span>=&gt; &#39;request/debug&#39; },
{ <span class="keyword">class </span>=  &quot;io/stdout&quot; },
NULL,
{ <span class="keyword">class </span>: &quot;io/stdout&quot; }
</pre></div><dl class="note"><dt><b>Note:</b></dt><dd>Note different string quotes and assignment marks.</dd></dl>
<p>Next, if you want to one backend have many childs, you need supply two chains: both of them would contain this backend and each of them would contain one of child backends. But this backend should be named. To name backend you need to write "name" parameter and unique name for it.</p>
<p>Following example demonstrate "debug" backend named "mynamehere" with two childs both "stdout": </p>
<div class="fragment"><pre class="fragment">{ <span class="keyword">class </span>=&gt; &quot;request/debug&quot;, name =&gt; <span class="stringliteral">&quot;mynamehere&quot;</span> },
{ <span class="keyword">class </span>=&gt; &quot;io/stdout&quot;                           },
NULL,
{ name  =&gt; <span class="stringliteral">&quot;mynamehere&quot;</span>                          },
{ <span class="keyword">class </span>=&gt; &quot;io/stdout&quot;                           }
</pre></div><p>Configuration file parsed from top to bottom, so, every named objects must be already created to be used properly. Some of backends can be defined at top of file separately, and lately used in chains. Active backends, for example cache, can't be used such way because on start it is trying fill cache with underlying backend's data. </p>
</div>

<h3><a class="anchor" id="tutorial_basics_input"></a>Input</h3><div class="textblock"><p><b>Stdin</b> </p>
<p>To have anything to be parsed it should be somehow passed in backend. Frozen have different ways in input data, most simple one is console. <a class="el" href="group__mod__backend__stdin.html">Backend 'io/stdin'</a> used to get data from stdin. And because stdin module is passive, <a class="el" href="group__mod__backend__transfer.html">Backend 'data/transfer'</a> used to activly transfer data from one backend chain to another. In this case destination is <a class="el" href="group__mod__backend__stdout.html">Backend 'io/stdout'</a> used. For more about outputs read next chapter.</p>
<div class="fragment"><pre class="fragment">{ <span class="keyword">class </span>=&gt; &quot;data/transfer&quot;,
        source = {
                { <span class="keyword">class </span>=&gt; &quot;io/stdin&quot;                         }
        },
        destination = {
                { <span class="keyword">class </span>=&gt; &quot;io/stdout&quot;                        }
        }
}
</pre></div><p>More likely that destination chain have much more backends, and <a class="el" href="group__mod__backend__transfer.html">Backend 'data/transfer'</a> can pass request instead of querying, so we can simplify configuration into following:</p>
<div class="fragment"><pre class="fragment">{ <span class="keyword">class </span>=&gt; &quot;data/transfer&quot;,
        source = {
                { <span class="keyword">class </span>=&gt; &quot;io/stdin&quot; }
        }
},
{ <span class="keyword">class </span>=&gt; &quot;io/stdout&quot; }
</pre></div><p><b>Fuse</b> </p>
<p>Next way is <a class="el" href="group__mod__backend__fuse.html">Backend 'io/fuse'</a> backend. It create filesystem using fuse and pass all read and writes to user defined backends. Sample configuration can look like so:</p>
<div class="fragment"><pre class="fragment">{ <span class="keyword">class </span>= &quot;fuse&quot;, mountpoint = <span class="stringliteral">&quot;/home/test/&quot;</span>, items = {
        { path = <span class="stringliteral">&quot;/one&quot;</span>, backend = {
                { <span class="keyword">class </span>= &quot;io/stdout&quot; }
        }}
}}
</pre></div><p>This creates file system in /home/test folder, which contain file named "one" and every write request to this file will result in console output. Use "echo 'hello' &gt;&gt; /home/test/one" or similar to test it.</p>
<p><b>Emitter</b> </p>
<p>One more way to input is describe backend which send requests you want. One of such backends is <a class="el" href="group__mod__backend__emitter.html">Backend 'request/emitter'</a>. Example: </p>
<div class="fragment"><pre class="fragment">{ <span class="keyword">class </span>=&gt; &quot;request/emitter&quot;, on_end = <span class="stringliteral">&quot;destroy&quot;</span>,
        request = {
                buffer = <span class="stringliteral">&quot;Hello, world!&quot;</span>
        }
},
{ <span class="keyword">class </span>=&gt; &quot;io/stdout&quot; }
</pre></div><dl class="note"><dt><b>Note:</b></dt><dd>"on_end" with "destroy" value kills frozen daemon after request passed. It is way flush stdout buffers and exit.</dd></dl>
<p><b>HTTP</b> </p>
<p>Another way is different modules, for example go_http. It create simple web server and pass request to user's backends. </p>
<div class="fragment"><pre class="fragment">{ <span class="keyword">class</span>=<span class="stringliteral">&quot;go_http&quot;</span>, addr=<span class="stringliteral">&quot;127.0.0.1:12345&quot;</span> },
{ <span class="keyword">class</span>=<span class="stringliteral">&quot;debug&quot;</span> }
</pre></div> </div></div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Nov 14 2011 23:37:53 for frozen by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
