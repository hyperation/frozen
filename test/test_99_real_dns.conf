{
	name   => "real_dns_domains",
	chains => {
		{ name='file', filename='data_real_dns_domains.dat' }
	}
},
{
	name   => "real_dns",
	chains => {
		{ name => "insert-sort", engine => "binsearch", field => "dns_domain" },
		{ name => "list"                                                      },
		{
			name   => "rewrite",
			script => "
				request_t rq_data;
				
				if(!data_cmp(request['action'], read)){
					data_arith((string)'*', request['offset'], (off_t)'16');
												
					rq_data['buffer'] = request['dns_domain'];
												
					request['buffer'] = data_alloca((string)'off_t', (size_t)'16');
					pass(request);
												
					rq_data['action'] = read;
					rq_data['offset']    = request['buffer'];
					ret = backend((string)'real_dns_domains', rq_data);
				};
				
				if(!data_cmp(request['action'], write)){
					rq_data['action']  = write;
					rq_data['buffer']  = request['dns_domain'];
					rq_data['offset_out'] = data_alloca((string)'memory', (size_t)'16');
					ret = backend((string)'real_dns_domains', rq_data);
												
					request['buffer'] = rq_data['offset_out'];
					data_arith((string)'*', request['offset'], (off_t)'16');
					pass(request);
					data_arith((string)'/', request['offset_out'], (off_t)'16');
				};
				
				if(!data_cmp(request['action'], delete)){
					data_arith((string)'*', request['offset'], (off_t)'16');
					ret = pass(request);
				};
				
				if(!data_cmp(request['action'], move)){
					data_arith((string)'*', request['offset_to'],   (off_t)'16');
					data_arith((string)'*', request['offset_from'], (off_t)'16');
					ret = pass(request);
				};
				
				if(!data_cmp(request['action'], count)){
					ret = pass(request);
					data_arith((string)'/', request['buffer'], (off_t)'16');
				};
			"
		},
		{ name => "file", filename => "data_real_dns.dat" }
	}
}
